server
{
    server_name localhost;

    listen 443 ssl;
    ssl_protocols TLSv1.3;

    ssl_certificate /etc/nginx/ssl/ft_transcendence.crt;
    ssl_certificate_key /etc/nginx/ssl/ft_transcendence.key;

    root /home/front-end/;

    index index.html;

    location / 
    {
        limit_except GET HEAD {
            deny all;
        }
        # Limite les méthodes HTTP exécutées à GET et HEAD
        # (acquisition des fichiers ou d'infos sur ces fichiers seulement)
    }

    location /oauth/token {
        proxy_pass https://api.intra.42.fr/oauth/token;

        add_header 'Access-Control-Allow-Origin' 'https://127.0.0.1' always;
        add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS' always;
        add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With' always;
        add_header 'Access-Control-Allow-Credentials' 'true' always;
    }
    location /v2/me {
        proxy_pass https://api.intra.42.fr/v2/me;

        add_header 'Access-Control-Allow-Origin' 'https://127.0.0.1' always;
        add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS' always;
        add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With' always;
        add_header 'Access-Control-Allow-Credentials' 'true' always;
    }
}
